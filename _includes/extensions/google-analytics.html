<script>
  function initGoogleAnalytics() {
    var doNotTrack = (window.doNotTrack === "1" || navigator.doNotTrack === "1" ||
      navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1");
    var enableDNT = "{{ site.enableDNT | default: true }}" == "true";

    if (!enableDNT || !doNotTrack) {
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', '{{ site.google_analytics }}', 'auto');
      ga('send', 'pageview');
    }
  }
  window.addEventListener("load", initGoogleAnalytics);
</script>



<!-- このコードは、Google Analyticsを使用してWebページのトラッキングを行うためのもの。
まず、initGoogleAnalytics()という名前のJavaScript関数が定義される。
この関数は、ブラウザがDo Not Trackを有効にしている場合にはGoogle Analyticsを無効にするため、
window.doNotTrack、navigator.doNotTrack、navigator.msDoNotTrackの値をチェックする。

そして、サイトの設定でDo Not Trackが有効になっていない場合、またはブラウザがDo Not Trackを
有効にしていない場合にのみ、Google Analyticsのトラッキングコードを読み込んで実行。

次に、ga()関数を使用して、Google AnalyticsのトラッキングIDを設定し、'send', 'pageview'を
引数として渡すことで、ページビューのトラッキングを行う。
このコードでは、'{{ site.google_analytics }}'の部分に、サイトの設定ファイルで指定された
Google AnalyticsのトラッキングIDが代入される。
最後に、window.addEventListener()を使用して、ページが完全に読み込まれた後に
initGoogleAnalytics()関数を呼び出すように設定している。
これにより、ページの読込が完了する前にGoogle Analyticsのトラッキングコードが実行されることを防ぐ。 -->
